<!DOCTYPE html>

<style>
    .title {
        font-size: x-large;
        font: bolder;
    }
</style>
<script src="CookieWrapper.js"></script>
<script src="TextRainbow.js"></script>
<script src="Utility.js"></script>
<body>
    <script>
        // cookie wrapper
        const daysToExpire = new Date(2147483647 * 1000).toUTCString();
        function SaveCookie()
        {
            setCookie("Balance", Balance.toString(), 120);
        }

        var CBalance = getCookie("Balance")

        // Update balance visually
        function UpdateBalance()
        {
            document.getElementById("balance").innerHTML = "Balance: "+Balance;
        }
    
        // Notification for the user
        function Notif(text)
        {
            // todo
        }
        // Load cookie
    
        // Balance management
        var Balance = 0;
        if (CBalance != "")
        {
            var Balance = parseInt(CBalance);
        }
        var Increment = 1;
        var IncrementButton = 1;
        var IncrementTime = 1000;
        var LastCheckTime = performance.now();
        var LastCheckBalance = 0;
        var LastCheckIncome = 0
    
        function UpdateIncome()
        {
            let Difference = (performance.now() - LastCheckTime)/1000;
            let ResultIncome = (Balance-LastCheckBalance)/Difference;
            document.getElementById("income").innerHTML = "Income (per second): "+Math.floor(ResultIncome*100)/100;
            LastCheckTime = performance.now();
            LastCheckBalance = Balance;
            LastCheckIncome = ResultIncome;
        }
    
        function TimeIncrement()
        {
            Balance += Increment;
            setTimeout(TimeIncrement, IncrementTime);
            UpdateBalance();
        }
    
        function ButtonIncrement()
        {
            Balance += IncrementButton;
            UpdateBalance();
        }
        setTimeout(TimeIncrement, IncrementTime);
        setInterval(UpdateIncome, 1000);
        window.addEventListener("beforeunload", SaveCookie());
    </script>
</body>

<title>EASIEST CLICKER GAME !!</title>

<h2 id="title" class="title">WORLD'S EASIEST CLICKER GAME!</h2>

<p id="balance" class="balance">Balance: 0</p>
<p id="income" class="income">Income (per second): 0</p>
<div class="b">
    <button onclick="ButtonIncrement()">Click to do the thing!!!</button>
    <p id="click" class="click">Income (per click): 1</p>
</div>